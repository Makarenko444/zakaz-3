# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ - 27 –Ω–æ—è–±—Ä—è 2025

## –û–±–∑–æ—Ä

–°–µ–≥–æ–¥–Ω—è –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ production —Å–µ—Ä–≤–µ—Ä–∞ zakaz2.tomica.ru –∏ —Å–æ–∑–¥–∞–Ω–∏—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞. –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –¥–≤–æ–π–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —Å–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏, –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

#### –ü—Ä–æ–±–ª–µ–º–∞ —Å –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏
- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –°–±–æ—Ä–∫–∞ –ø–∞–¥–∞–ª–∞ —Å –æ—à–∏–±–∫–æ–π ESLint `react/no-unescaped-entities`
- üìÅ **–§–∞–π–ª:** `app/components/AddressLinkWizard.tsx:675`
- üîß **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω—ã –æ–±—ã—á–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –Ω–∞ HTML entities `&quot;`
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

**–î–æ:**
```tsx
–§–æ—Ä–º–∞—Ç: "—É–ª–∏—Ü–∞ –ù–∞–∑–≤–∞–Ω–∏–µ", "–ø—Ä–æ—Å–ø–µ–∫—Ç –ù–∞–∑–≤–∞–Ω–∏–µ" –∏ —Ç.–¥.
```

**–ü–æ—Å–ª–µ:**
```tsx
–§–æ—Ä–º–∞—Ç: &quot;—É–ª–∏—Ü–∞ –ù–∞–∑–≤–∞–Ω–∏–µ&quot;, &quot;–ø—Ä–æ—Å–ø–µ–∫—Ç –ù–∞–∑–≤–∞–Ω–∏–µ&quot; –∏ —Ç.–¥.
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–∫—Ä–∏–ø—Ç–æ–≤ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è

#### –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
- ‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω `pr-main.sh` ‚Üí `pr-zakaz3.sh` (—Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä)
- ‚úÖ –°–æ–∑–¥–∞–Ω `pr-zakaz2.sh` (production —Å–µ—Ä–≤–µ—Ä)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∏–º—è PM2 –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PM2_PROCESS_NAME`

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
2. Git pull –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –±–∏–ª–¥–∞
5. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å Turbopack
6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2 –ø—Ä–æ—Ü–µ—Å—Å–∞
7. –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
```
zakaz3.tomica.ru (dev):     ~/projects/zakaz-3  ‚Üí  PM2: zakaz-3
zakaz2.tomica.ru (prod):    ~/projects/zakaz-2  ‚Üí  PM2: zakaz-2
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ production —Å–µ—Ä–≤–µ—Ä–∞ zakaz2.tomica.ru

#### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∏ –∞—Ä—Ö–∏–≤—ã:
  - `~/zakaz2` (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è - 497MB)
  - `~/zakaz-2.0-archive` (–∞—Ä—Ö–∏–≤ - 372MB)
  - `~/apps/zakaz-3` (–¥—É–±–ª–∏–∫–∞—Ç - 420MB)
- ‚úÖ –°–æ–∑–¥–∞–Ω backup –∞—Ä—Ö–∏–≤ –≤—Å–µ—Ö —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ `~/old-projects-backup/`
- ‚úÖ –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ ~1.3GB –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `~/projects/zakaz-2`
- ‚úÖ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–∑ GitHub
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `.env.local`:
  - `PORT=3000`
  - `NEXTAUTH_URL=https://zakaz2.tomica.ru`
  - `NEXTAUTH_SECRET` –¥–ª—è production
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase —á–µ—Ä–µ–∑ `localhost:8000`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (359 packages)
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∞ production —Å–±–æ—Ä–∫–∞
- ‚úÖ –ó–∞–ø—É—â–µ–Ω PM2 –ø—Ä–æ—Ü–µ—Å—Å `zakaz-2`

#### PM2 —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –£–¥–∞–ª–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å `zakaz-3` —Å production —Å–µ—Ä–≤–µ—Ä–∞ (–æ–Ω –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ dev)
- ‚úÖ –ó–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å `zakaz-2` –¥–ª—è production
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2 (`pm2 save`)

### 4. –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–≤–æ–π–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
- üìã **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∞–¥–º–∏–Ω—Å–∫–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –ø–æ—è–≤–ª—è–ª–∞—Å—å –≤—Ç–æ—Ä–∞—è —Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (HTTP Basic Auth)
- üéØ **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
  - `/dashboard/admin`
  - `/dashboard/nodes`
  - `/dashboard/applications-by-address`
  - `/dashboard`

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
**–ù–∞–π–¥–µ–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞:**
```bash
curl -I http://localhost:8000
# HTTP/1.1 401 Unauthorized
# WWW-Authenticate: Basic realm="kong"
```

Kong API Gateway (Supabase) —Ç—Ä–µ–±–æ–≤–∞–ª Basic Auth –¥–ª—è –≤—Å–µ—Ö `/api/*` –∑–∞–ø—Ä–æ—Å–æ–≤.

**–ü—Ä–æ–±–ª–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:**
- Next.js API routes (`/api/nodes`, `/api/admin`, etc.) –ø–æ–ø–∞–¥–∞–ª–∏ –ø–æ–¥ –ø—Ä–∞–≤–∏–ª–æ Nginx `location /api/`
- –≠—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ Supabase Kong (–ø–æ—Ä—Ç 8000)
- Kong —Ç—Ä–µ–±–æ–≤–∞–ª Basic Auth —Å credentials:
  - Username: `supabase`
  - Password: –∏–∑ `DASHBOARD_PASSWORD`

#### –†–µ—à–µ–Ω–∏–µ
**–û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx** (`/etc/nginx/sites-available/zakaz-3`):

–î–æ–±–∞–≤–ª–µ–Ω—ã Next.js API routes –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
```nginx
# Next.js API routes - –≤—Å–µ –Ω–∞—à–∏ API (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ü–ï–†–ï–î Supabase API proxy)
location ~ ^/api/(auth|applications|addresses|users|logs|comments|statuses|nodes|admin|dashboard|statistics).* {
    proxy_pass http://zakaz3_upstream;
    # ... proxy settings
}

# Supabase API proxy (–¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö /api/*)
location /api/ {
    rewrite ^/api/(.*) /$1 break;
    proxy_pass http://127.0.0.1:8000;
    # ... proxy settings
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –î–≤–æ–π–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

#### –ù–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
1. **`DEPLOY_SCRIPTS_README.md`** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–µ–ø–ª–æ—è
2. **`MIGRATION_TO_PROJECTS.md`** - –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤

#### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∞–ª–∏–∞—Å—ã –¥–ª—è `pr-zakaz3` –∏ `pr-zakaz2`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–∏–∞—Å–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

#### –°–æ–∑–¥–∞–Ω—ã –∞–ª–∏–∞—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è:
```bash
# zakaz3.tomica.ru (dev)
alias pr-zakaz3='cd ~/projects/zakaz-3 && ./pr-zakaz3.sh'

# zakaz2.tomica.ru (prod)
alias pr-zakaz2='cd ~/projects/zakaz-2 && ./pr-zakaz2.sh'
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
pr-zakaz3  # –î–µ–ø–ª–æ–π –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
pr-zakaz2  # –î–µ–ø–ª–æ–π –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
```

## –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°–±–æ—Ä–∫–∞ –ø–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ ESLint –æ—à–∏–±–æ–∫
**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error: `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –≤ JSX —Ç–µ–∫—Å—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∞ `"` –Ω–∞ `&quot;` –≤ 4 –º–µ—Å—Ç–∞—Ö

**–§–∞–π–ª—ã:** `app/components/AddressLinkWizard.tsx:675`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: PM2 –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
**–°–∏–º–ø—Ç–æ–º—ã:**
```
[PM2][ERROR] Process or Namespace zakaz-3-dev not found
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è PM2 –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ —Å–∫—Ä–∏–ø—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ `pm2 describe`
2. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `PM2_PROCESS_NAME` –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ zakaz-2
**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error: listen EADDRINUSE: address already in use :::3000
```

**–ü—Ä–∏—á–∏–Ω–∞:** –û–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ (zakaz-2 –∏ zakaz-3) –ø—ã—Ç–∞–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç 3000

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–¥–∞–ª–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å zakaz-3 —Å production —Å–µ—Ä–≤–µ—Ä–∞
2. –ù–∞—Å—Ç—Ä–æ–µ–Ω `.env.local` —Å `PORT=3000` –¥–ª—è zakaz-2
3. zakaz-3 –æ—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ dev —Å–µ—Ä–≤–µ—Ä–µ

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –î–≤–æ–π–Ω–∞—è —Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
**–°–∏–º–ø—Ç–æ–º—ã:** HTTP Basic Auth popup –æ—Ç Kong API Gateway

**–ü—Ä–∏—á–∏–Ω–∞:** Nginx –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–ª Next.js API routes –Ω–∞ Supabase Kong

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è Nginx —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –¥–ª—è Next.js API

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
curl -I http://localhost:8000
# HTTP/1.1 401 Unauthorized
# WWW-Authenticate: Basic realm="kong"

grep -n "fetch.*api" app/dashboard/nodes/page.tsx
# 176: const response = await fetch(`/api/nodes?${params}`)
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ API routes:**
- `/api/nodes` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞–º–∏ —Å–≤—è–∑–∏
- `/api/admin` - –∞–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `/api/dashboard` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ dashboard
- `/api/statistics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**zakaz3.tomica.ru (Development/Testing):**
- IP: `78.140.55.90`
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `~/projects/zakaz-3`
- PM2 –ø—Ä–æ—Ü–µ—Å—Å: `zakaz-3`
- –ü–æ—Ä—Ç: `3000`
- URL: https://zakaz3.tomica.ru
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–µ—Ä–µ–¥ production

**zakaz2.tomica.ru (Production):**
- IP: `78.140.57.33`
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `~/projects/zakaz-2`
- PM2 –ø—Ä–æ—Ü–µ—Å—Å: `zakaz-2`
- –ü–æ—Ä—Ç: `3000`
- URL: https://zakaz2.tomica.ru
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ë–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–û–±—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- Supabase: `http://localhost:8000` (–Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ)
- PostgreSQL: —á–µ—Ä–µ–∑ Supabase
- Nginx: Reverse proxy –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è API

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è Nginx

```
–ó–∞–ø—Ä–æ—Å ‚Üí Nginx (zakaz-3 config) ‚Üí Routing:
‚îÇ
‚îú‚îÄ /api/(auth|applications|addresses|users|logs|comments|statuses|nodes|admin|dashboard|statistics).*
‚îÇ  ‚îî‚îÄ> Next.js (localhost:3000)
‚îÇ
‚îú‚îÄ /api/*
‚îÇ  ‚îî‚îÄ> Supabase Kong (localhost:8000) - –¥–ª—è –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Supabase
‚îÇ
‚îî‚îÄ /*
   ‚îî‚îÄ> Next.js (localhost:3000)
```

### Workflow –¥–µ–ø–ª–æ—è

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ zakaz3
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ zakaz3.tomica.ru
3. –ö–æ–º–º–∏—Ç –∏ push –≤ GitHub

**Production –¥–µ–ø–ª–æ–π:**
1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ zakaz2.tomica.ru
2. –ó–∞–ø—É—Å–∫ `pr-zakaz2`
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**zakaz3.tomica.ru (.env.local):**
```env
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...
SUPABASE_DIRECT_URL=http://localhost:8000
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/postgres
NEXTAUTH_URL=https://zakaz3.tomica.ru
NEXTAUTH_SECRET=super-secret-key-for-zakaz3
PORT=3000
```

**zakaz2.tomica.ru (.env.local):**
```env
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...
SUPABASE_DIRECT_URL=http://localhost:8000
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/postgres
NEXTAUTH_URL=https://zakaz2.tomica.ru
NEXTAUTH_SECRET=super-secret-key-for-zakaz2-production
PORT=3000
```

### PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ zakaz2.tomica.ru:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id ‚îÇ name               ‚îÇ mode     ‚îÇ ‚Ü∫    ‚îÇ status    ‚îÇ cpu      ‚îÇ memory   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 5  ‚îÇ zakaz-2            ‚îÇ fork     ‚îÇ 0    ‚îÇ online    ‚îÇ 0%       ‚îÇ 41.1mb   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```bash
pm2 list              # –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 logs zakaz-2      # –õ–æ–≥–∏
pm2 restart zakaz-2   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 stop zakaz-2      # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 save              # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `/etc/nginx/sites-available/zakaz-3`

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ API routes –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Supabase API
3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ location –±–ª–æ–∫–æ–≤ (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ ‚Üí –æ–±—â–∏–µ)

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Git –∫–æ–º–º–∏—Ç—ã
1. `8d73da8` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –≤ AddressLinkWizard.tsx
2. `847fc3c` - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω pr-main.sh ‚Üí pr-zakaz3.sh –∏ –¥–æ–±–∞–≤–ª–µ–Ω pr-zakaz2.sh
3. `340cc1d` - –£–ª—É—á—à–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
4. `59891b5` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è zakaz2 –∏ zakaz3

### –§–∞–π–ª—ã
- **–°–æ–∑–¥–∞–Ω–æ:** 3 —Ñ–∞–π–ª–∞
  - `pr-zakaz3.sh` (–∏–∑ pr-main.sh)
  - `pr-zakaz2.sh`
  - `DEPLOY_SCRIPTS_README.md`
  - `MIGRATION_TO_PROJECTS.md`
- **–ò–∑–º–µ–Ω–µ–Ω–æ:** 2 —Ñ–∞–π–ª–∞
  - `app/components/AddressLinkWizard.tsx`
  - `/etc/nginx/sites-available/zakaz-3` (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- **–£–¥–∞–ª–µ–Ω–æ:** ~1.3GB —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞
- –î–æ–±–∞–≤–ª–µ–Ω–æ: ~400 —Å—Ç—Ä–æ–∫ (—Å–∫—Ä–∏–ø—Ç—ã + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- –ò–∑–º–µ–Ω–µ–Ω–æ: 1 —Å—Ç—Ä–æ–∫–∞ (–∫–∞–≤—ã—á–∫–∏)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 2 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ zakaz3.tomica.ru
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É zakaz3.tomica.ru
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é `~/zakaz-3` ‚Üí `~/projects/zakaz-3`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–∏–∞—Å `pr-zakaz3`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –¥–µ–ø–ª–æ—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ production
- [ ] –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ zakaz2.tomica.ru
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–æ–π–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–æ–∫
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ —É–∑–ª–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PM2 (pm2 monitor)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (pm2-logrotate —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README.md —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–≤—É—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–û–±—â–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –û–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É –±–∞–∑—É Supabase –Ω–∞ zakaz2
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ zakaz3 –≤–ª–∏—è—é—Ç –Ω–∞ production –¥–∞–Ω–Ω—ã–µ
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π dev –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

2. **–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Nginx:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
   - –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π

3. **–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ Supabase credentials:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –∫–ª—é—á–∏
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ dev –∏ prod –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS —Å Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- ‚úÖ PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ (127.0.0.1:5432)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –¥–≤–æ–π–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Kong Basic Auth)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ Nginx
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è environment variables –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting –¥–ª—è API endpoints
- [ ] –î–æ–±–∞–≤–∏—Ç—å fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç brute-force
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ NEXTAUTH_SECRET –¥–ª—è dev –∏ prod

## –ó–∞–º–µ—Ç–∫–∏

### –£—Å–ø–µ—Ö–∏
1. ‚úÖ Production —Å–µ—Ä–≤–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –†–µ—à–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–≤–æ–π–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
3. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —É–¥–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ –∞–ª–∏–∞—Å—ã
4. ‚úÖ –û—á–∏—â–µ–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –¥–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
5. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –£—Ä–æ–∫–∏
1. **–í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:** –ü–æ—Ä—è–¥–æ–∫ location –±–ª–æ–∫–æ–≤ –≤ Nginx –∫—Ä–∏—Ç–∏—á–µ–Ω
2. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ curl:** `curl -I` –ø–æ–º–æ–≥ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É —Å Kong
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã:** –°—ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –ø—Ä–∏ –±—É–¥—É—â–∏—Ö –¥–µ–ø–ª–æ—è—Ö
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:** –ü–æ–º–æ–≥–∞–µ—Ç –Ω–µ —Ç–µ—Ä—è—Ç—å –¥–µ—Ç–∞–ª–∏

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
curl -I http://localhost:8000              # –ü—Ä–æ–≤–µ—Ä–∫–∞ Supabase
pm2 logs zakaz-2 --lines 50                # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo nginx -t                              # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
sudo systemctl reload nginx                # –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx

# –î–µ–ø–ª–æ–π
pr-zakaz2                                  # Production –¥–µ–ø–ª–æ–π
pr-zakaz3                                  # Dev –¥–µ–ø–ª–æ–π
pm2 list                                   # –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
pm2 restart zakaz-2                        # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 stop zakaz-2                          # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 start npm --name "zakaz-2" -- start   # –ó–∞–ø—É—Å–∫
```

## –°—Å—ã–ª–∫–∏

- **Production:** https://zakaz2.tomica.ru
- **Development:** https://zakaz3.tomica.ru
- **GitHub:** https://github.com/Makarenko444/zakaz-3
- **–¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞:** claude/fix-shell-script-alias-012M8m342ApXU1KZm69nXjpr

---

**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025
**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã:** ~4 —á–∞—Å–∞
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
**Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 95%

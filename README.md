# Zakaz-3 - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ Next.js 15 –∏ Supabase.

## üåê –°–µ—Ä–≤–µ—Ä—ã

**Production (–±–æ–µ–≤–æ–π):**
- URL: https://zakaz2.tomica.ru
- –°–µ—Ä–≤–µ—Ä: zakaz2.tomica.ru (78.140.57.33)
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `~/projects/zakaz-2`
- PM2 –ø—Ä–æ—Ü–µ—Å—Å: `zakaz-2`

**Development (—Ç–µ—Å—Ç–æ–≤—ã–π):**
- URL: https://zakaz3.tomica.ru
- –°–µ—Ä–≤–µ—Ä: zakaz3.tomica.ru (78.140.55.90)
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `~/projects/zakaz-3`
- PM2 –ø—Ä–æ—Ü–µ—Å—Å: `zakaz-3`

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–æ–≤, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ–ª–Ω—ã–º –∞—É–¥–∏—Ç–æ–º –¥–µ–π—Å—Ç–≤–∏–π.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - 10 —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –¥–æ—Å—Ç—É–ø–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- **–°—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–æ–∫** - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏–∑ –ë–î —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π** - –ø—Ä–∏–≤—è–∑–∫–∞ –∑–∞—è–≤–æ–∫ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **–ù–∞—Ä—è–¥—ã –Ω–∞ —Ä–∞–±–æ—Ç—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Ä—è–¥–æ–≤ –Ω–∞ –æ—Å–º–æ—Ç—Ä –∏ –º–æ–Ω—Ç–∞–∂, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- **–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Ä—è–¥–æ–≤ –ø–æ –¥–Ω—è–º –∏ –Ω–µ–¥–µ–ª—è–º, –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –∑–∞—è–≤–∫–∞–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–≤–µ—Ç–∞ –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º, –º–∏–Ω–∏–∞—Ç—é—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - –∏–º–ø–æ—Ä—Ç –∏–∑ Excel, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–æ–∏—Å–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∑–ª–æ–≤ —Å–µ—Ç–∏ (–ê–û, –ü–†–ü, –°–ö, –†–¢–ö)
- **–ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π** - –ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ
- **–ê–¥—Ä–µ—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ (–¢–æ–º—Å–∫, –°–µ–≤–µ—Ä—Å–∫)
- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤** - –∏–º–ø–æ—Ä—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Frontend**: Next.js 15 (App Router), React 19, TypeScript, TailwindCSS 4
- **Backend**: Next.js API Routes
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Supabase (PostgreSQL)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: Zod + React Hook Form
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Supabase Auth

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/Makarenko444/zakaz-3.git
cd zakaz-3
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env.local` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```bash
cp .env.example .env.local
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env.local`:

```env
# Public Supabase URL (—á–µ—Ä–µ–∑ Nginx reverse proxy –¥–ª—è HTTPS)
NEXT_PUBLIC_SUPABASE_URL=https://your-domain.com/api

# Public Supabase Anon Key
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here

# Private Supabase Service Role Key (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Direct Supabase URL (–¥–ª—è server-side –æ–ø–µ—Ä–∞—Ü–∏–π, –º–∏–Ω—É—è Nginx)
SUPABASE_DIRECT_URL=http://your-supabase-ip:8000
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ë–∞–∑–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã** (`zakaz_users`, `zakaz_applications`, `zakaz_addresses` –∏ —Ç.–¥.)

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Supabase Dashboard –≤ –ø–æ—Ä—è–¥–∫–µ:

```bash
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ Supabase Dashboard -> SQL Editor)
database/migrations/005_create_audit_log.sql              # –ñ—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π
database/migrations/006_create_comments.sql               # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞—è–≤–∫–∞–º
database/migrations/007_create_application_statuses.sql   # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤
database/migrations/016_add_reply_to_comments.sql         # –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
database/migrations/018_create_nodes_table.sql            # –¢–∞–±–ª–∏—Ü–∞ —É–∑–ª–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
database/migrations/019_fix_node_types.sql                # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤
database/migrations/029_add_city_field.sql                # –ü–æ–ª–µ –≥–æ—Ä–æ–¥ –≤ –∑–∞—è–≤–∫–∞—Ö
database/migrations/030_add_original_address_fields.sql   # –ü–æ–ª—è –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ï—Å–ª–∏ –±–∞–∑–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã, —Å–æ–∑–¥–∞–π—Ç–µ –∏—Ö —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ë–î.

## üèÉ –ó–∞–ø—É—Å–∫

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000) –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### Production —Å–±–æ—Ä–∫–∞

```bash
# –°–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å production —Å–µ—Ä–≤–µ—Ä
npm run start
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
npm run lint
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
zakaz-3/
‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ api/                      # API Routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ applications/         # API –∑–∞—è–≤–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ addresses/            # API –∞–¥—Ä–µ—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ files/                # API —Ñ–∞–π–ª–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nodes/                # API —É–∑–ª–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ work-orders/          # API –Ω–∞—Ä—è–¥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schedule/             # API –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ statuses/             # API —Å—Ç–∞—Ç—É—Å–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/                # API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ components/               # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/                # –°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞—à–±–æ—Ä–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ applications/         # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—è–≤–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ work-orders/          # –°—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—Ä—è–¥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schedule/             # –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ files/                # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nodes/                # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ print/                    # –ü–µ—á–∞—Ç–Ω—ã–µ —Ñ–æ—Ä–º—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ work-orders/          # –ü–µ—á–∞—Ç—å –Ω–∞—Ä—è–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ login/                    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx                # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îú‚îÄ‚îÄ lib/                          # –£—Ç–∏–ª–∏—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts               # Supabase –∫–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ supabase-direct.ts        # –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (—Å–µ—Ä–≤–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ audit-log.ts              # –°–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ auth-client.ts            # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ session.ts                # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ types.ts                  # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ database/                     # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îú‚îÄ‚îÄ docs/                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ progress/                 # –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ workflow.md               # –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ DEPLOYMENT.md             # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îú‚îÄ‚îÄ frontend/                     # –°—Ç–∏–ª–∏ –∏ —Ä–µ—Å—É—Ä—Å—ã
‚îú‚îÄ‚îÄ middleware.ts                 # Next.js middleware
‚îî‚îÄ‚îÄ package.json
```

## üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –†–æ–ª—å | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | `admin` | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º |
| –ú–µ–Ω–µ–¥–∂–µ—Ä | `manager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π |
| –ò–Ω–∂–µ–Ω–µ—Ä | `engineer` | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∑–∞—è–≤–∫–∞–º–∏ |
| –ú–æ–Ω—Ç–∞–∂–Ω–∏–∫ | `installer` | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–æ–Ω—Ç–∞–∂–Ω—ã—Ö —Ä–∞–±–æ—Ç |
| –°–Ω–∞–±–∂–µ–Ω–∏–µ | `supply` | –†–∞–±–æ—Ç–∞ —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –∏ –ø–æ—Å—Ç–∞–≤–∫–∞–º–∏ |
| –î–∏—Ä–µ–∫—Ç–æ—Ä | `director` | –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å |
| –ë—É—Ö–≥–∞–ª—Ç–µ—Ä | `accountant` | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á–µ—Ç |
| –¢–µ—Ö.–ø–æ–¥–¥–µ—Ä–∂–∫–∞ | `support` | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è | `maintenance` | –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª |
| –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ | `approval` | –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Supabase Auth —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ middleware —É—Ä–æ–≤–Ω–µ. –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫—Ä–æ–º–µ `/login` —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- `zakaz_users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `zakaz_applications` - –∑–∞—è–≤–∫–∏ (–≤–∫–ª—é—á–∞—è –ø–æ–ª—è `city`, `street_and_house`, `address_details`, `street_and_house_original`, `address_details_original`)
- `zakaz_addresses` - –∞–¥—Ä–µ—Å–∞ –æ–±—ä–µ–∫—Ç–æ–≤
- `zakaz_nodes` - —É–∑–ª—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–ê–û, –ü–†–ü, –°–ö, –†–¢–ö)
- `zakaz_application_statuses` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤
- `zakaz_application_status_history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- `zakaz_application_comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞—è–≤–∫–∞–º
- `zakaz_files` - –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫ –∑–∞—è–≤–∫–∞–º –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º
- `zakaz_sessions` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏
- `zakaz_audit_log` - –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π

### –¢–∞–±–ª–∏—Ü—ã –Ω–∞—Ä—è–¥–æ–≤:

- `zakaz_work_orders` - –Ω–∞—Ä—è–¥—ã –Ω–∞ —Ä–∞–±–æ—Ç—ã (–æ—Å–º–æ—Ç—Ä, –º–æ–Ω—Ç–∞–∂)
- `zakaz_work_order_executors` - –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –Ω–∞—Ä—è–¥–æ–≤ (many-to-many)
- `zakaz_work_order_materials` - –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç
- `zakaz_work_order_status_history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–æ–≤ –Ω–∞—Ä—è–¥–æ–≤

### –ü–æ–ª—è –∞–¥—Ä–µ—Å–æ–≤ –≤ –∑–∞—è–≤–∫–∞—Ö:

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `city` | –ì–æ—Ä–æ–¥ (–¢–æ–º—Å–∫, –°–µ–≤–µ—Ä—Å–∫) |
| `street_and_house` | –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å (—É–ª–∏—Ü–∞ –∏ –¥–æ–º) |
| `address_details` | –î–µ—Ç–∞–ª–∏ –∞–¥—Ä–µ—Å–∞ (–∫–≤–∞—Ä—Ç–∏—Ä–∞, —ç—Ç–∞–∂, –æ—Ñ–∏—Å) |
| `street_and_house_original` | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏–∑ –∏–º–ø–æ—Ä—Ç–∞ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è) |
| `address_details_original` | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –∏–º–ø–æ—Ä—Ç–∞ |

## üîÑ Workflow –¥–µ–ø–ª–æ—è

### –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

**–ù–∞ production —Å–µ—Ä–≤–µ—Ä (zakaz2.tomica.ru):**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@zakaz2.tomica.ru

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
pr-zakaz2
```

**–ù–∞ development —Å–µ—Ä–≤–µ—Ä (zakaz3.tomica.ru):**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@zakaz3.tomica.ru

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
pr-zakaz3
```

–°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç:
1. ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
2. ‚úÖ Git pull –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. ‚úÖ –û—á–∏—Å—Ç–∫—É —Å—Ç–∞—Ä–æ–≥–æ –±–∏–ª–¥–∞
5. ‚úÖ –°–±–æ—Ä–∫—É –ø—Ä–æ–µ–∫—Ç–∞
6. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2 –ø—Ä–æ—Ü–µ—Å—Å–∞

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π –≤—Ä—É—á–Ω—É—é:

**Production (zakaz2.tomica.ru):**
```bash
cd ~/projects/zakaz-2
git pull origin main
npm install
rm -rf .next
npm run build
pm2 restart zakaz-2
```

**Development (zakaz3.tomica.ru):**
```bash
cd ~/projects/zakaz-3
git pull origin main
npm install
rm -rf .next
npm run build
pm2 restart zakaz-3
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–∏–∞—Å–æ–≤ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)

–ï—Å–ª–∏ –∞–ª–∏–∞—Å—ã –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –î–ª—è zakaz2
echo "alias pr-zakaz2='cd ~/projects/zakaz-2 && ./pr-zakaz2.sh'" >> ~/.bashrc
source ~/.bashrc

# –î–ª—è zakaz3
echo "alias pr-zakaz3='cd ~/projects/zakaz-3 && ./pr-zakaz3.sh'" >> ~/.bashrc
source ~/.bashrc
```

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–º. –≤ [DEPLOY_SCRIPTS_README.md](./DEPLOY_SCRIPTS_README.md)

## üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ feature –≤–µ—Ç–∫—É
2. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request –≤ `main`
5. –ü–æ—Å–ª–µ –º–µ—Ä–∂–∞ –¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ production

### –í–∞–∂–Ω–æ:

- ‚ùå **–ù–ï –¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç—ã –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –±–æ–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ**
- ‚úÖ **–í—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ GitHub**
- ‚úÖ **–ë–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–ø–ª–æ—è**

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](./TECHNICAL_SPECIFICATION.md)
- [–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](./docs/progress/)
- [–ù–∞—Ä—è–¥—ã –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å (16.12.2025)](./docs/progress/2025-12-16-work-orders-and-calendar.md)
- [–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤ (10.12.2025)](./docs/progress/2025-12-10-address-normalization-and-backup.md)
- [–ò–º–ø–æ—Ä—Ç –∞–¥—Ä–µ—Å–æ–≤](./scripts/README_addresses_import.md)

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ TypeScript

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ Supabase, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–≤–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤:

```typescript
const { data, error } = await supabase
  .from('table_name')
  .select('*')
  .single() as { data: YourType | null; error: unknown }
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å production –±–∏–ª–¥–æ–º

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env.local`
2. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Supabase –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º URL
3. –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ß–∞—Å—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

Makarenko444

---

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –±–∞–≥–æ–≤ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ GitHub.
